# Reth + Lighthouse ä»¥å¤ªåŠèŠ‚ç‚¹è¿è¡ŒæŒ‡å—

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ä½¿ç”¨ Rethï¼ˆæ‰§è¡Œå±‚å®¢æˆ·ç«¯ï¼‰å’Œ Lighthouseï¼ˆå…±è¯†å±‚å®¢æˆ·ç«¯ï¼‰è¿è¡Œä¸€ä¸ªå®Œæ•´çš„ä»¥å¤ªåŠèŠ‚ç‚¹ã€‚

## ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
- [æ¶æ„è¯´æ˜](#æ¶æ„è¯´æ˜)
- [å®‰è£…æ­¥éª¤](#å®‰è£…æ­¥éª¤)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [è¿è¡ŒèŠ‚ç‚¹](#è¿è¡ŒèŠ‚ç‚¹)
- [åŒæ­¥çŠ¶æ€](#åŒæ­¥çŠ¶æ€)
- [ç›‘æ§å’Œç»´æŠ¤](#ç›‘æ§å’Œç»´æŠ¤)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æ€§èƒ½ä¼˜åŒ–å»ºè®®](#æ€§èƒ½ä¼˜åŒ–å»ºè®®)

## æ¦‚è¿°

### Reth

Reth æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„ä»¥å¤ªåŠæ‰§è¡Œå±‚å®¢æˆ·ç«¯ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸš€ **é«˜æ€§èƒ½**: ä½¿ç”¨ Rust ç¼–å†™ï¼Œæ€§èƒ½ä¼˜å¼‚
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**: æ¶æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
- ğŸ”„ **å¿«é€ŸåŒæ­¥**: é«˜æ•ˆçš„æ•°æ®åº“è®¾è®¡å’ŒåŒæ­¥ç®—æ³•
- ğŸ›¡ï¸ **å®‰å…¨æ€§**: ç»è¿‡ä¸¥æ ¼çš„å®‰å…¨å®¡è®¡

### Lighthouse

Lighthouse æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„ä»¥å¤ªåŠå…±è¯†å±‚ï¼ˆä¿¡æ ‡é“¾ï¼‰å®¢æˆ·ç«¯ï¼Œç‰¹ç‚¹åŒ…æ‹¬ï¼š

- âš¡ **é«˜æ€§èƒ½**: Rust å®ç°çš„å…±è¯†å±‚å®¢æˆ·ç«¯
- ğŸ”’ **å®‰å…¨å¯é **: ç”Ÿäº§ç¯å¢ƒéªŒè¯çš„ç¨³å®šæ€§
- ğŸ“Š **å®Œæ•´åŠŸèƒ½**: æ”¯æŒéªŒè¯å™¨ã€API ç­‰å®Œæ•´åŠŸèƒ½
- ğŸŒ **æ´»è·ƒå¼€å‘**: æŒç»­æ›´æ–°å’Œç»´æŠ¤

### ç»„åˆä¼˜åŠ¿

Reth + Lighthouse çš„ç»„åˆä¼˜åŠ¿ï¼š

- ä¸¤ä¸ªå®¢æˆ·ç«¯éƒ½ç”¨ Rust ç¼–å†™ï¼Œèµ„æºå ç”¨ç›¸å¯¹è¾ƒä½
- æ€§èƒ½ä¼˜å¼‚ï¼ŒåŒæ­¥é€Ÿåº¦å¿«
- ä»£ç å¼€æºï¼Œç¤¾åŒºæ´»è·ƒ
- é€‚åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

#### æœ€å°é…ç½®ï¼ˆè½»é‡çº§ä¼˜åŒ–æ¨¡å¼ï¼‰

- **CPU**: 4 æ ¸å¿ƒï¼ˆæ¨è 8 æ ¸å¿ƒï¼‰
- **å†…å­˜**: 16 GB RAMï¼ˆæ¨è 32 GBï¼‰
- **å­˜å‚¨**: 500 GB SSDï¼ˆæ¨è 1 TB NVMe SSDï¼Œä½¿ç”¨ä¿®å‰ªæ¨¡å¼ï¼‰
- **ç½‘ç»œ**: 100 Mbps å¸¦å®½

#### æ¨èé…ç½®ï¼ˆä¸»ç½‘ç”Ÿäº§ç¯å¢ƒï¼‰

- **CPU**: 8+ æ ¸å¿ƒï¼ˆæ¨è 16 æ ¸å¿ƒï¼‰
- **å†…å­˜**: 32 GB RAMï¼ˆæ¨è 64 GBï¼‰
- **å­˜å‚¨**: 1-2 TB NVMe SSDï¼ˆä½¿ç”¨ä¿®å‰ªæ¨¡å¼ï¼Œæ— éœ€å®Œæ•´å†å²æ•°æ®ï¼‰
- **ç½‘ç»œ**: 1 Gbps å¸¦å®½

**æ³¨æ„**: æœ¬é…ç½®ä½¿ç”¨ä¿®å‰ªæ¨¡å¼ï¼ˆpruned modeï¼‰ï¼Œåªä¿ç•™å¿…è¦çš„é“¾æ•°æ®ï¼Œå¤§å¹…å‡å°‘ç£ç›˜å ç”¨ã€‚

### è½¯ä»¶è¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04 LTS æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨è 22.04 LTSï¼‰
- **å†…æ ¸ç‰ˆæœ¬**: Linux 5.4+
- **Rust**: æœ€æ–°ç¨³å®šç‰ˆï¼ˆReth å’Œ Lighthouse éœ€è¦ï¼‰
- **å…¶ä»–ä¾èµ–**: 
  - `build-essential`
  - `git`
  - `curl`
  - `pkg-config`
  - `libssl-dev`
  - `clang`
  - `libclang-dev`

## æ¶æ„è¯´æ˜

### æ‰§è¡Œå±‚ + å…±è¯†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Reth (EL)     â”‚  â† æ‰§è¡Œå±‚å®¢æˆ·ç«¯
â”‚   Port: 8545    â”‚     å¤„ç†äº¤æ˜“å’Œæ‰§è¡Œ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Engine API
         â”‚ (JSON-RPC)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lighthouse (CL)â”‚  â† å…±è¯†å±‚å®¢æˆ·ç«¯
â”‚  Port: 5052     â”‚     å¤„ç†å…±è¯†å’ŒåŒºå—éªŒè¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç«¯å£è¯´æ˜

**Reth (æ‰§è¡Œå±‚)**:
- `8545` - HTTP JSON-RPC
- `8546` - WebSocket JSON-RPC
- `30303` - P2P ç«¯å£ï¼ˆTCP/UDPï¼‰

**Lighthouse (å…±è¯†å±‚)**:
- `5052` - HTTP REST API
- `5054` - Metrics (å¯é€‰)
- `9000` - P2P ç«¯å£ï¼ˆTCP/UDPï¼‰

**Engine API**:
- Reth é»˜è®¤: `8551`
- Lighthouse é»˜è®¤: `8551`

## å®‰è£…æ­¥éª¤

### 1. ç³»ç»Ÿå‡†å¤‡

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…åŸºç¡€ä¾èµ–
sudo apt install -y \
    build-essential \
    git \
    curl \
    pkg-config \
    libssl-dev \
    clang \
    libclang-dev \
    cmake
```

### 2. å®‰è£… Rust

Reth å’Œ Lighthouse éƒ½éœ€è¦ Rust ç¼–è¯‘ç¯å¢ƒã€‚

```bash
# å®‰è£… Rust (ä½¿ç”¨ rustup)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
source ~/.cargo/env

# éªŒè¯å®‰è£…
rustc --version
cargo --version
```

### 3. å®‰è£… Reth

#### æ–¹å¼ä¸€ï¼šä»æºç ç¼–è¯‘ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/paradigmxyz/reth.git
cd reth

# åˆ‡æ¢åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬
git checkout $(git describe --tags --abbrev=0)

# ç¼–è¯‘ï¼ˆè¿™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼‰
cargo build --release

# å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„
sudo cp target/release/reth /usr/local/bin/

# éªŒè¯å®‰è£…
reth --version
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶ï¼ˆå¦‚æœå¯ç”¨ï¼‰

```bash
# ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼ˆæ›¿æ¢ VERSION ä¸ºå®é™…ç‰ˆæœ¬å·ï¼‰
RELEASE_URL=$(curl -s https://api.github.com/repos/paradigmxyz/reth/releases/latest | grep "browser_download_url.*linux.*tar.gz" | cut -d '"' -f 4)
curl -L $RELEASE_URL -o reth.tar.gz
tar -xzf reth.tar.gz
sudo cp reth /usr/local/bin/
```

### 4. å®‰è£… Lighthouse

#### æ–¹å¼ä¸€ï¼šä»æºç ç¼–è¯‘ï¼ˆæ¨èï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/sigp/lighthouse.git
cd lighthouse

# åˆ‡æ¢åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬
git checkout $(git describe --tags --abbrev=0)

# ç¼–è¯‘ï¼ˆè¿™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼‰
make

# å®‰è£…åˆ°ç³»ç»Ÿè·¯å¾„
sudo cp target/release/lighthouse /usr/local/bin/

# éªŒè¯å®‰è£…
lighthouse --version
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨é¢„ç¼–è¯‘äºŒè¿›åˆ¶ï¼ˆå¦‚æœå¯ç”¨ï¼‰

```bash
# ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
RELEASE_URL=$(curl -s https://api.github.com/repos/sigp/lighthouse/releases/latest | grep "browser_download_url.*x86_64.*tar.gz" | cut -d '"' -f 4)
curl -L $RELEASE_URL -o lighthouse.tar.gz
tar -xzf lighthouse.tar.gz
sudo cp lighthouse /usr/local/bin/
```

## é…ç½®è¯´æ˜

### 1. åˆ›å»ºæ•°æ®ç›®å½•

```bash
# åˆ›å»ºæ•°æ®ç›®å½•
sudo mkdir -p /var/lib/reth
sudo mkdir -p /var/lib/lighthouse
sudo chown -R $USER:$USER /var/lib/reth
sudo chown -R $USER:$USER /var/lib/lighthouse
```

### 2. Reth é…ç½®

#### åŸºæœ¬é…ç½®

åˆ›å»º Reth é…ç½®æ–‡ä»¶ `/etc/reth/config.toml`ï¼ˆå¯é€‰ï¼‰ï¼š

```toml
[datadir]
# æ•°æ®ç›®å½•
datadir = "/var/lib/reth"

[network]
# P2P ç«¯å£
port = 30303
# æœ€å¤§å¯¹ç­‰èŠ‚ç‚¹æ•°
max_peers = 50

[rpc]
# HTTP RPC ç«¯å£
http_port = 8545
# WebSocket RPC ç«¯å£
ws_port = 8546
# å…è®¸çš„ HTTP æ¥æº
http_cors = ["*"]
# RPC åœ°å€ç»‘å®š
http_addr = "0.0.0.0"
ws_addr = "0.0.0.0"

[engine]
# Engine API åœ°å€ï¼ˆä¾› Lighthouse è¿æ¥ï¼‰
listen_addr = "127.0.0.1"
port = 8551
# JWT å¯†é’¥è·¯å¾„
jwt_secret = "/var/lib/reth/jwt-secret"
```

#### ç”Ÿæˆ JWT Secret

Reth å’Œ Lighthouse éœ€è¦é€šè¿‡ JWT å¯†é’¥è¿›è¡Œè®¤è¯ï¼š

```bash
# ç”Ÿæˆ JWT secret
openssl rand -hex 32 | tr -d "\n" > /var/lib/reth/jwt-secret
chmod 600 /var/lib/reth/jwt-secret
```

### 3. Lighthouse é…ç½®

Lighthouse ä¸»è¦é€šè¿‡å‘½ä»¤è¡Œå‚æ•°é…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚

#### åŸºæœ¬é…ç½®ç¤ºä¾‹

åˆ›å»º Lighthouse é…ç½®ç›®å½•ï¼š

```bash
mkdir -p /etc/lighthouse
```

## è¿è¡ŒèŠ‚ç‚¹

### å¯åŠ¨é¡ºåº

**é‡è¦**: å¿…é¡»å…ˆå¯åŠ¨ Rethï¼ˆæ‰§è¡Œå±‚ï¼‰ï¼Œç„¶åå†å¯åŠ¨ Lighthouseï¼ˆå…±è¯†å±‚ï¼‰ã€‚

### 1. å¯åŠ¨ Rethï¼ˆä¼˜åŒ–é…ç½®ï¼‰

#### ä¼˜åŒ–å¯åŠ¨å‘½ä»¤ï¼ˆæ¨è - èŠ‚çœç£ç›˜ç©ºé—´å’Œ CPUï¼‰

æœ¬é…ç½®ä½¿ç”¨ä¿®å‰ªæ¨¡å¼ï¼Œåªä¿ç•™å¿…è¦çš„é“¾æ•°æ®ï¼Œå¤§å¹…å‡å°‘ç£ç›˜å ç”¨å’Œ CPU è´Ÿè½½ï¼š

```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p /var/log/reth

# ä¼˜åŒ–å¯åŠ¨å‘½ä»¤ï¼ˆæ‰‹åŠ¨å¯åŠ¨ï¼‰
reth node \
    --datadir /var/lib/reth \
    --chain mainnet \
    --prune \
    --prune.max-history 128 \
    --http \
    --http.api eth,net,web3,engine,admin \
    --http.port 8545 \
    --http.addr 0.0.0.0 \
    --ws \
    --ws.api eth,net,web3,engine,admin \
    --ws.port 8546 \
    --ws.addr 0.0.0.0 \
    --authrpc.addr 127.0.0.1 \
    --authrpc.port 8551 \
    --authrpc.jwtsecret /var/lib/reth/jwt-secret \
    --port 30303 \
    --max-peers 25 \
    --db.max-readers 8 \
    --db.max-writers 4 \
    --txpool.max-size 1000 \
    --txpool.max-account-slots 16
```

#### ä¼˜åŒ–å‚æ•°è¯´æ˜

**ç£ç›˜ç©ºé—´ä¼˜åŒ–**:
- `--prune`: å¯ç”¨ä¿®å‰ªæ¨¡å¼ï¼Œè‡ªåŠ¨æ¸…ç†æ—§çš„å†å²æ•°æ®
- `--prune.max-history 128`: åªä¿ç•™æœ€è¿‘ 128 ä¸ªåŒºå—çš„å†å²æ•°æ®ï¼ˆå¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼Œå€¼è¶Šå°å ç”¨è¶Šå°‘ï¼‰

**CPU æ€§èƒ½ä¼˜åŒ–**:
- `--max-peers 25`: å‡å°‘å¯¹ç­‰èŠ‚ç‚¹æ•°ï¼ˆé»˜è®¤ 50ï¼‰ï¼Œé™ä½ç½‘ç»œå’Œ CPU è´Ÿè½½
- `--db.max-readers 8`: é™åˆ¶æ•°æ®åº“è¯»å–å™¨æ•°é‡ï¼Œé¿å…è¿‡åº¦å¹¶å‘
- `--db.max-writers 4`: é™åˆ¶æ•°æ®åº“å†™å…¥å™¨æ•°é‡ï¼Œä¼˜åŒ– I/O æ€§èƒ½
- `--txpool.max-size 1000`: é™åˆ¶äº¤æ˜“æ± å¤§å°ï¼Œå‡å°‘å†…å­˜å ç”¨
- `--txpool.max-account-slots 16`: é™åˆ¶æ¯ä¸ªè´¦æˆ·çš„äº¤æ˜“æ§½ä½

**API ä¼˜åŒ–**:
- ç§»é™¤äº† `debug` å’Œ `trace` APIï¼ˆè¿™äº›ä¼šå ç”¨å¤§é‡èµ„æºï¼‰
- åªä¿ç•™å¿…è¦çš„ APIï¼š`eth,net,web3,engine,admin`

#### ä½¿ç”¨ nohup åå°å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ nohup åœ¨åå°å¯åŠ¨ Reth
nohup reth node \
    --datadir /var/lib/reth \
    --chain mainnet \
    --prune \
    --prune.max-history 128 \
    --http \
    --http.api eth,net,web3,engine,admin \
    --http.port 8545 \
    --http.addr 0.0.0.0 \
    --ws \
    --ws.api eth,net,web3,engine,admin \
    --ws.port 8546 \
    --ws.addr 0.0.0.0 \
    --authrpc.addr 127.0.0.1 \
    --authrpc.port 8551 \
    --authrpc.jwtsecret /var/lib/reth/jwt-secret \
    --port 30303 \
    --max-peers 25 \
    --db.max-readers 8 \
    --db.max-writers 4 \
    --txpool.max-size 1000 \
    --txpool.max-account-slots 16 \
    > /var/log/reth.log 2>&1 &

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep reth

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/reth.log
```

#### ä½¿ç”¨ screen å¯åŠ¨ï¼ˆä¾¿äºç®¡ç†ï¼‰

```bash
# å®‰è£… screenï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
sudo apt install screen -y

# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > ~/start_reth.sh << 'EOF'
#!/bin/bash
cd /var/lib/reth
reth node \
    --datadir /var/lib/reth \
    --chain mainnet \
    --prune \
    --prune.max-history 128 \
    --http \
    --http.api eth,net,web3,engine,admin \
    --http.port 8545 \
    --http.addr 0.0.0.0 \
    --ws \
    --ws.api eth,net,web3,engine,admin \
    --ws.port 8546 \
    --ws.addr 0.0.0.0 \
    --authrpc.addr 127.0.0.1 \
    --authrpc.port 8551 \
    --authrpc.jwtsecret /var/lib/reth/jwt-secret \
    --port 30303 \
    --max-peers 25 \
    --db.max-readers 8 \
    --db.max-writers 4 \
    --txpool.max-size 1000 \
    --txpool.max-account-slots 16
EOF

chmod +x ~/start_reth.sh

# åœ¨ screen ä¸­å¯åŠ¨
screen -S reth -dm bash -c '~/start_reth.sh'

# æŸ¥çœ‹ screen ä¼šè¯
screen -ls

# è¿æ¥åˆ° screen ä¼šè¯
screen -r reth

# é€€å‡º screenï¼ˆä¸æ–­å¼€è¿›ç¨‹ï¼‰ï¼šæŒ‰ Ctrl+Aï¼Œç„¶åæŒ‰ D
# åœæ­¢ Rethï¼šåœ¨ screen ä¸­æŒ‰ Ctrl+C
```

### 2. å¯åŠ¨ Lighthouseï¼ˆä¼˜åŒ–é…ç½®ï¼‰

åœ¨ Reth å¯åŠ¨å¹¶è¿è¡Œåï¼Œå¯åŠ¨ Lighthouseï¼š

#### ä¼˜åŒ–å¯åŠ¨å‘½ä»¤

```bash
# åˆ›å»ºæ—¥å¿—ç›®å½•
mkdir -p /var/log/lighthouse

# ä¼˜åŒ–å¯åŠ¨å‘½ä»¤ï¼ˆæ‰‹åŠ¨å¯åŠ¨ï¼‰
lighthouse bn \
    --network mainnet \
    --datadir /var/lib/lighthouse \
    --execution-endpoint http://127.0.0.1:8551 \
    --execution-jwt /var/lib/reth/jwt-secret \
    --checkpoint-sync-url https://beaconstate.info \
    --http \
    --http-address 0.0.0.0 \
    --http-port 5052 \
    --port 9000 \
    --target-peers 25 \
    --disable-deposit-contract-sync \
    --execution-timeout-multiplier 2
```

#### ä¼˜åŒ–å‚æ•°è¯´æ˜

**èµ„æºä¼˜åŒ–**:
- `--target-peers 25`: å‡å°‘ç›®æ ‡å¯¹ç­‰èŠ‚ç‚¹æ•°ï¼ˆé»˜è®¤ 50ï¼‰ï¼Œé™ä½ç½‘ç»œå’Œ CPU è´Ÿè½½
- `--disable-deposit-contract-sync`: ç¦ç”¨å­˜æ¬¾åˆçº¦åŒæ­¥ï¼ŒèŠ‚çœèµ„æº
- ç§»é™¤äº† `--metrics`ï¼šå¦‚æœä¸éœ€è¦ç›‘æ§æŒ‡æ ‡ï¼Œå¯ä»¥ç§»é™¤ä»¥èŠ‚çœèµ„æº

**åŒæ­¥ä¼˜åŒ–**:
- `--checkpoint-sync-url https://beaconstate.info`: ä½¿ç”¨æ£€æŸ¥ç‚¹åŒæ­¥ï¼Œå¤§å¹…åŠ é€Ÿåˆå§‹åŒæ­¥
- `--execution-timeout-multiplier 2`: å¢åŠ æ‰§è¡Œå±‚è¶…æ—¶å€æ•°ï¼Œæé«˜ç¨³å®šæ€§

#### ä½¿ç”¨ nohup åå°å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨ nohup åœ¨åå°å¯åŠ¨ Lighthouse
nohup lighthouse bn \
    --network mainnet \
    --datadir /var/lib/lighthouse \
    --execution-endpoint http://127.0.0.1:8551 \
    --execution-jwt /var/lib/reth/jwt-secret \
    --checkpoint-sync-url https://beaconstate.info \
    --http \
    --http-address 0.0.0.0 \
    --http-port 5052 \
    --port 9000 \
    --target-peers 25 \
    --disable-deposit-contract-sync \
    --execution-timeout-multiplier 2 \
    > /var/log/lighthouse.log 2>&1 &

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep lighthouse

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/lighthouse.log
```

#### ä½¿ç”¨ screen å¯åŠ¨ï¼ˆä¾¿äºç®¡ç†ï¼‰

```bash
# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > ~/start_lighthouse.sh << 'EOF'
#!/bin/bash
cd /var/lib/lighthouse
lighthouse bn \
    --network mainnet \
    --datadir /var/lib/lighthouse \
    --execution-endpoint http://127.0.0.1:8551 \
    --execution-jwt /var/lib/reth/jwt-secret \
    --checkpoint-sync-url https://beaconstate.info \
    --http \
    --http-address 0.0.0.0 \
    --http-port 5052 \
    --port 9000 \
    --target-peers 25 \
    --disable-deposit-contract-sync \
    --execution-timeout-multiplier 2
EOF

chmod +x ~/start_lighthouse.sh

# åœ¨ screen ä¸­å¯åŠ¨
screen -S lighthouse -dm bash -c '~/start_lighthouse.sh'

# æŸ¥çœ‹ screen ä¼šè¯
screen -ls

# è¿æ¥åˆ° screen ä¼šè¯
screen -r lighthouse

# é€€å‡º screenï¼ˆä¸æ–­å¼€è¿›ç¨‹ï¼‰ï¼šæŒ‰ Ctrl+Aï¼Œç„¶åæŒ‰ D
# åœæ­¢ Lighthouseï¼šåœ¨ screen ä¸­æŒ‰ Ctrl+C
```

### 3. åœæ­¢èŠ‚ç‚¹

```bash
# æŸ¥æ‰¾è¿›ç¨‹
ps aux | grep -E "reth|lighthouse"

# åœæ­¢ Reth
pkill -f "reth node"

# åœæ­¢ Lighthouse
pkill -f "lighthouse bn"

# å¦‚æœåœ¨ screen ä¸­è¿è¡Œï¼Œå¯ä»¥è¿æ¥åˆ° screen åæŒ‰ Ctrl+C
screen -r reth
screen -r lighthouse
```

## åŒæ­¥çŠ¶æ€

### æ£€æŸ¥ Reth åŒæ­¥çŠ¶æ€

```bash
# é€šè¿‡ RPC æŸ¥è¯¢åŒæ­¥çŠ¶æ€
curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_syncing","params":[],"id":1}' \
    http://localhost:8545

# æŸ¥è¯¢æœ€æ–°åŒºå—å·
curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
    http://localhost:8545
```

å¦‚æœè¿”å› `false`ï¼Œè¯´æ˜å·²åŒæ­¥å®Œæˆã€‚

### æ£€æŸ¥ Lighthouse åŒæ­¥çŠ¶æ€

```bash
# æŸ¥è¯¢åŒæ­¥çŠ¶æ€
curl http://localhost:5052/eth/v1/node/syncing

# æŸ¥è¯¢å¥åº·çŠ¶æ€
curl http://localhost:5052/eth/v1/node/health

# æŸ¥è¯¢é“¾å¤´ä¿¡æ¯
curl http://localhost:5052/eth/v1/beacon/headers/finalized
```

### åŒæ­¥æ—¶é—´

- **ä¿®å‰ªæ¨¡å¼åŒæ­¥**: ä½¿ç”¨ `--prune` æ¨¡å¼ï¼Œé¦–æ¬¡åŒæ­¥æ—¶é—´ä¼šå¤§å¹…ç¼©çŸ­ï¼Œé€šå¸¸æ•°å°æ—¶åˆ°æ•°å¤©å³å¯å®Œæˆ
- **æ£€æŸ¥ç‚¹åŒæ­¥**: ä½¿ç”¨ `--checkpoint-sync-url` å¯ä»¥å¤§å¹…åŠ é€Ÿ Lighthouse åˆå§‹åŒæ­¥ï¼ˆæ¨èï¼‰
- **ç£ç›˜å ç”¨**: ä¿®å‰ªæ¨¡å¼ä¸‹çš„ç£ç›˜å ç”¨çº¦ä¸ºå®Œæ•´èŠ‚ç‚¹çš„ 10-20%ï¼Œé€šå¸¸åªéœ€è¦ 200-500 GB

## å¯åŠ¨è„šæœ¬ï¼ˆå¯é€‰ï¼‰

ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥åˆ›å»ºå¯åŠ¨å’Œåœæ­¢è„šæœ¬ï¼š

### åˆ›å»ºå¯åŠ¨è„šæœ¬

```bash
# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > ~/start_nodes.sh << 'EOF'
#!/bin/bash

# æ£€æŸ¥ Reth æ˜¯å¦å·²è¿è¡Œ
if pgrep -f "reth node" > /dev/null; then
    echo "Reth å·²åœ¨è¿è¡Œ"
else
    echo "å¯åŠ¨ Reth..."
    nohup reth node \
        --datadir /var/lib/reth \
        --chain mainnet \
        --prune \
        --prune.max-history 128 \
        --http \
        --http.api eth,net,web3,engine,admin \
        --http.port 8545 \
        --http.addr 0.0.0.0 \
        --ws \
        --ws.api eth,net,web3,engine,admin \
        --ws.port 8546 \
        --ws.addr 0.0.0.0 \
        --authrpc.addr 127.0.0.1 \
        --authrpc.port 8551 \
        --authrpc.jwtsecret /var/lib/reth/jwt-secret \
        --port 30303 \
        --max-peers 25 \
        --db.max-readers 8 \
        --db.max-writers 4 \
        --txpool.max-size 1000 \
        --txpool.max-account-slots 16 \
        > /var/log/reth.log 2>&1 &
    echo "Reth å·²å¯åŠ¨ï¼ŒPID: $(pgrep -f 'reth node')"
fi

# ç­‰å¾… Reth å¯åŠ¨
sleep 5

# æ£€æŸ¥ Lighthouse æ˜¯å¦å·²è¿è¡Œ
if pgrep -f "lighthouse bn" > /dev/null; then
    echo "Lighthouse å·²åœ¨è¿è¡Œ"
else
    echo "å¯åŠ¨ Lighthouse..."
    nohup lighthouse bn \
        --network mainnet \
        --datadir /var/lib/lighthouse \
        --execution-endpoint http://127.0.0.1:8551 \
        --execution-jwt /var/lib/reth/jwt-secret \
        --checkpoint-sync-url https://beaconstate.info \
        --http \
        --http-address 0.0.0.0 \
        --http-port 5052 \
        --port 9000 \
        --target-peers 25 \
        --disable-deposit-contract-sync \
        --execution-timeout-multiplier 2 \
        > /var/log/lighthouse.log 2>&1 &
    echo "Lighthouse å·²å¯åŠ¨ï¼ŒPID: $(pgrep -f 'lighthouse bn')"
fi

echo "èŠ‚ç‚¹å¯åŠ¨å®Œæˆ"
EOF

chmod +x ~/start_nodes.sh
```

### åˆ›å»ºåœæ­¢è„šæœ¬

```bash
# åˆ›å»ºåœæ­¢è„šæœ¬
cat > ~/stop_nodes.sh << 'EOF'
#!/bin/bash

echo "åœæ­¢ Lighthouse..."
pkill -f "lighthouse bn"
sleep 2

echo "åœæ­¢ Reth..."
pkill -f "reth node"
sleep 2

echo "æ£€æŸ¥è¿›ç¨‹..."
if pgrep -f "reth node" > /dev/null || pgrep -f "lighthouse bn" > /dev/null; then
    echo "è­¦å‘Š: ä»æœ‰è¿›ç¨‹åœ¨è¿è¡Œ"
    pgrep -f "reth node" && echo "Reth PID: $(pgrep -f 'reth node')"
    pgrep -f "lighthouse bn" && echo "Lighthouse PID: $(pgrep -f 'lighthouse bn')"
else
    echo "æ‰€æœ‰èŠ‚ç‚¹å·²åœæ­¢"
fi
EOF

chmod +x ~/stop_nodes.sh
```

### ä½¿ç”¨è„šæœ¬

```bash
# å¯åŠ¨èŠ‚ç‚¹
~/start_nodes.sh

# åœæ­¢èŠ‚ç‚¹
~/stop_nodes.sh

# æŸ¥çœ‹çŠ¶æ€
ps aux | grep -E "reth|lighthouse"
```

## ç›‘æ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç®¡ç†

#### æŸ¥çœ‹å®æ—¶æ—¥å¿—

```bash
# æŸ¥çœ‹ Reth æ—¥å¿—
tail -f /var/log/reth.log

# æŸ¥çœ‹ Lighthouse æ—¥å¿—
tail -f /var/log/lighthouse.log

# åŒæ—¶æŸ¥çœ‹ä¸¤ä¸ªæ—¥å¿—
tail -f /var/log/reth.log /var/log/lighthouse.log
```

#### æ—¥å¿—è½®è½¬

åˆ›å»ºæ—¥å¿—è½®è½¬é…ç½® `/etc/logrotate.d/reth-lighthouse`:

```
/var/log/reth.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0640 your_username your_username
}

/var/log/lighthouse.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0640 your_username your_username
}
```

### 2. ç›‘æ§æŒ‡æ ‡

#### Lighthouse Metrics

å¦‚æœå¯ç”¨äº† metricsï¼ˆ`--metrics`ï¼‰ï¼Œå¯ä»¥è®¿é—®ï¼š

```bash
# æŸ¥çœ‹æŒ‡æ ‡
curl http://localhost:5054/metrics
```

å¸¸ç”¨ç›‘æ§æŒ‡æ ‡ï¼š

- `lighthouse_sync_eth1_fallback_configured`: ETH1 è¿æ¥çŠ¶æ€
- `lighthouse_network_peers`: å¯¹ç­‰èŠ‚ç‚¹æ•°
- `lighthouse_beacon_current_slot`: å½“å‰ slot
- `lighthouse_beacon_head_slot`: é“¾å¤´ slot

### 3. èµ„æºç›‘æ§

```bash
# æŸ¥çœ‹è¿›ç¨‹èµ„æºä½¿ç”¨
top -p $(pgrep reth) -p $(pgrep lighthouse)

# æˆ–ä½¿ç”¨ htop
htop -p $(pgrep reth),$(pgrep lighthouse)

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h /var/lib/reth /var/lib/lighthouse

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
netstat -an | grep -E "30303|9000|8545|5052"
```

### 4. å®šæœŸç»´æŠ¤

#### å¤‡ä»½é…ç½®

```bash
# å¤‡ä»½é‡è¦é…ç½®å’Œå¯†é’¥
sudo tar -czf reth-lighthouse-backup-$(date +%Y%m%d).tar.gz \
    /var/lib/reth/jwt-secret \
    ~/start_nodes.sh \
    ~/stop_nodes.sh \
    ~/start_reth.sh \
    ~/start_lighthouse.sh
```

#### æ›´æ–°å®¢æˆ·ç«¯

```bash
# åœæ­¢èŠ‚ç‚¹
~/stop_nodes.sh
# æˆ–æ‰‹åŠ¨åœæ­¢
pkill -f "reth node"
pkill -f "lighthouse bn"

# æ›´æ–°ä»£ç ï¼ˆå¦‚æœä»æºç ç¼–è¯‘ï¼‰
cd /path/to/reth
git pull
cargo build --release
sudo cp target/release/reth /usr/local/bin/

cd /path/to/lighthouse
git pull
make
sudo cp target/release/lighthouse /usr/local/bin/

# é‡å¯èŠ‚ç‚¹
~/start_nodes.sh
# æˆ–æ‰‹åŠ¨å¯åŠ¨ï¼ˆå‚è€ƒè¿è¡ŒèŠ‚ç‚¹ç« èŠ‚ï¼‰
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Reth æ— æ³•å¯åŠ¨

**é—®é¢˜**: ç«¯å£è¢«å ç”¨

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tulpn | grep -E "8545|30303|8551"
sudo lsof -i :8545

# æ€æ­»å ç”¨è¿›ç¨‹
sudo kill -9 <PID>
```

**é—®é¢˜**: JWT secret æ–‡ä»¶ä¸å­˜åœ¨æˆ–æƒé™é”™è¯¯

```bash
# æ£€æŸ¥æ–‡ä»¶
ls -l /var/lib/reth/jwt-secret

# é‡æ–°ç”Ÿæˆ
openssl rand -hex 32 | tr -d "\n" > /var/lib/reth/jwt-secret
chmod 600 /var/lib/reth/jwt-secret
```

#### 2. Lighthouse æ— æ³•è¿æ¥åˆ° Reth

**é—®é¢˜**: Engine API è¿æ¥å¤±è´¥

- æ£€æŸ¥ Reth æ˜¯å¦æ­£åœ¨è¿è¡Œ: `ps aux | grep "reth node"`
- æ£€æŸ¥ JWT secret è·¯å¾„æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ Engine API åœ°å€å’Œç«¯å£ï¼ˆåº”è¯¥æ˜¯ `127.0.0.1:8551`ï¼‰
- æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†æœ¬åœ°è¿æ¥

```bash
# æ£€æŸ¥ Reth è¿›ç¨‹
ps aux | grep "reth node"

# æµ‹è¯•è¿æ¥
curl -X POST -H "Content-Type: application/json" \
    --data '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' \
    http://127.0.0.1:8551

# æŸ¥çœ‹ Reth æ—¥å¿—
tail -n 50 /var/log/reth.log
```

#### 3. åŒæ­¥ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**:

- ä½¿ç”¨æ£€æŸ¥ç‚¹åŒæ­¥ï¼ˆcheckpoint syncï¼‰
- å¢åŠ æœ€å¤§å¯¹ç­‰èŠ‚ç‚¹æ•°
- æ£€æŸ¥ç½‘ç»œå¸¦å®½
- ä½¿ç”¨ SSD å­˜å‚¨
- æ£€æŸ¥ç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ I/Oï¼‰

#### 4. å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:

- å¢åŠ ç³»ç»Ÿå†…å­˜
- å…³é—­å…¶ä»–å ç”¨å†…å­˜çš„æœåŠ¡
- æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰

#### 5. ç£ç›˜ç©ºé—´ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:

- ç›‘æ§ç£ç›˜ä½¿ç”¨: `df -h`
- ä½¿ç”¨ä¿®å‰ªæ¨¡å¼ï¼ˆ`--prune`ï¼‰å¯ä»¥å¤§å¹…å‡å°‘ç£ç›˜å ç”¨
- è°ƒæ•´ `--prune.max-history` å‚æ•°ï¼Œå€¼è¶Šå°å ç”¨è¶Šå°‘ï¼ˆä½†ä¼šå½±å“å†å²æŸ¥è¯¢èƒ½åŠ›ï¼‰
- å®šæœŸæ¸…ç†æ—¥å¿—æ–‡ä»¶: `find /var/log -name "*.log" -mtime +7 -delete`
- æ£€æŸ¥æ•°æ®ç›®å½•å¤§å°: `du -sh /var/lib/reth /var/lib/lighthouse`

### æ—¥å¿—åˆ†æ

#### Reth æ—¥å¿—å…³é”®è¯

- `Syncing`: æ­£åœ¨åŒæ­¥
- `Synced`: å·²åŒæ­¥
- `Error`: é”™è¯¯ä¿¡æ¯
- `Peer`: å¯¹ç­‰èŠ‚ç‚¹è¿æ¥

#### Lighthouse æ—¥å¿—å…³é”®è¯

- `Syncing`: æ­£åœ¨åŒæ­¥
- `Synced`: å·²åŒæ­¥
- `ERROR`: é”™è¯¯ä¿¡æ¯
- `WARN`: è­¦å‘Šä¿¡æ¯
- `Connected to execution node`: è¿æ¥åˆ°æ‰§è¡ŒèŠ‚ç‚¹

### è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—çº§åˆ«ï¼ˆå¦‚æœæ”¯æŒï¼‰
# Reth
reth node --log-level debug ...

# Lighthouse
lighthouse bn --log-level debug ...

# æ£€æŸ¥ç½‘ç»œè¿æ¥
ss -tulpn | grep -E "30303|9000|8545|5052|8551"

# æ£€æŸ¥è¿›ç¨‹çŠ¶æ€
ps aux | grep -E "reth|lighthouse"

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
iostat -x 1
vmstat 1
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç³»ç»Ÿä¼˜åŒ–

```bash
# å¢åŠ æ–‡ä»¶æè¿°ç¬¦é™åˆ¶
echo "* soft nofile 65535" | sudo tee -a /etc/security/limits.conf
echo "* hard nofile 65535" | sudo tee -a /etc/security/limits.conf

# ä¼˜åŒ–ç½‘ç»œå‚æ•°
sudo sysctl -w net.core.rmem_max=134217728
sudo sysctl -w net.core.wmem_max=134217728
sudo sysctl -w net.ipv4.tcp_fin_timeout=30
sudo sysctl -w net.ipv4.tcp_keepalive_time=600
sudo sysctl -w net.ipv4.tcp_keepalive_probes=3
sudo sysctl -w net.ipv4.tcp_keepalive_intvl=15

# ä¼˜åŒ– I/O è°ƒåº¦ï¼ˆé’ˆå¯¹ SSDï¼‰
echo noop | sudo tee /sys/block/nvme0n1/queue/scheduler 2>/dev/null || true
```

### 2. Reth ç£ç›˜ç©ºé—´ä¼˜åŒ–

**ä¿®å‰ªæ¨¡å¼é…ç½®**:
- `--prune`: å¯ç”¨è‡ªåŠ¨ä¿®å‰ªï¼Œåˆ é™¤æ—§çš„å†å²æ•°æ®
- `--prune.max-history 128`: åªä¿ç•™æœ€è¿‘ 128 ä¸ªåŒºå—çš„å†å²ï¼ˆå¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼‰
  - å€¼è¶Šå°ï¼Œç£ç›˜å ç”¨è¶Šå°‘ï¼Œä½†å†å²æŸ¥è¯¢èƒ½åŠ›è¶Šå¼±
  - æ¨èå€¼ï¼š64-256 ä¸ªåŒºå—

**æ•°æ®åº“ä¼˜åŒ–**:
- `--db.max-readers 8`: é™åˆ¶å¹¶å‘è¯»å–ï¼Œé¿å…è¿‡åº¦å ç”¨èµ„æº
- `--db.max-writers 4`: é™åˆ¶å¹¶å‘å†™å…¥ï¼Œä¼˜åŒ– I/O æ€§èƒ½

**äº¤æ˜“æ± ä¼˜åŒ–**:
- `--txpool.max-size 1000`: é™åˆ¶äº¤æ˜“æ± å¤§å°ï¼ˆé»˜è®¤æ›´å¤§ï¼‰
- `--txpool.max-account-slots 16`: é™åˆ¶æ¯ä¸ªè´¦æˆ·çš„äº¤æ˜“æ§½ä½

### 3. Reth CPU æ€§èƒ½ä¼˜åŒ–

**ç½‘ç»œä¼˜åŒ–**:
- `--max-peers 25`: å‡å°‘å¯¹ç­‰èŠ‚ç‚¹æ•°ï¼ˆé»˜è®¤ 50ï¼‰ï¼Œé™ä½ç½‘ç»œå¤„ç†è´Ÿè½½
- æ ¹æ®å®é™…ç½‘ç»œå¸¦å®½è°ƒæ•´ï¼Œå¸¦å®½è¾ƒå°å¯ä»¥è¿›ä¸€æ­¥é™ä½

**API ä¼˜åŒ–**:
- ç§»é™¤ä¸å¿…è¦çš„ APIï¼š`debug`, `trace` ç­‰ä¼šå ç”¨å¤§é‡ CPU å’Œå†…å­˜
- åªå¯ç”¨å¿…è¦çš„ APIï¼š`eth,net,web3,engine,admin`

### 4. Lighthouse ä¼˜åŒ–

**åŒæ­¥ä¼˜åŒ–**:
- `--checkpoint-sync-url`: ä½¿ç”¨æ£€æŸ¥ç‚¹åŒæ­¥ï¼Œå¤§å¹…åŠ é€Ÿåˆå§‹åŒæ­¥
- `--target-peers 25`: å‡å°‘å¯¹ç­‰èŠ‚ç‚¹æ•°ï¼Œé™ä½èµ„æºå ç”¨

**åŠŸèƒ½è£å‰ª**:
- `--disable-deposit-contract-sync`: å¦‚æœä¸éœ€è¦éªŒè¯å™¨åŠŸèƒ½ï¼Œå¯ä»¥ç¦ç”¨
- ç§»é™¤ `--metrics`: å¦‚æœä¸éœ€è¦ç›‘æ§æŒ‡æ ‡ï¼Œå¯ä»¥èŠ‚çœèµ„æº

### 5. ç£ç›˜ç©ºé—´å ç”¨å¯¹æ¯”

| æ¨¡å¼ | ç£ç›˜å ç”¨ | å†å²æ•°æ® | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|---------|
| å®Œæ•´èŠ‚ç‚¹ | 2-4 TB | å®Œæ•´å†å² | éœ€è¦å®Œæ•´å†å²æŸ¥è¯¢ |
| ä¿®å‰ªæ¨¡å¼ï¼ˆæœ¬é…ç½®ï¼‰ | 200-500 GB | æœ€è¿‘ 128 åŒºå— | è½»é‡çº§èŠ‚ç‚¹ï¼ŒèŠ‚çœç©ºé—´ |
| æœ€å°ä¿®å‰ª | 100-200 GB | æœ€è¿‘ 32-64 åŒºå— | æç®€é…ç½® |

### 6. ç¡¬ä»¶å»ºè®®ï¼ˆä¼˜åŒ–é…ç½®ï¼‰

- **å­˜å‚¨**: 500 GB - 1 TB NVMe SSDï¼ˆä¿®å‰ªæ¨¡å¼ï¼‰
- **å†…å­˜**: 16-32 GB RAMï¼ˆè¶³å¤Ÿè¿è¡Œä¿®å‰ªæ¨¡å¼ï¼‰
- **CPU**: 4-8 æ ¸å¿ƒï¼ˆä¿®å‰ªæ¨¡å¼å¯¹ CPU è¦æ±‚è¾ƒä½ï¼‰
- **ç½‘ç»œ**: 100 Mbps+ ç¨³å®šè¿æ¥

### 7. ç›‘æ§èµ„æºä½¿ç”¨

```bash
# ç›‘æ§ CPU å’Œå†…å­˜
top -p $(pgrep -d, -f "reth|lighthouse")

# ç›‘æ§ç£ç›˜ I/O
iostat -x 1

# ç›‘æ§ç£ç›˜ä½¿ç”¨
df -h
du -sh /var/lib/reth /var/lib/lighthouse

# ç›‘æ§ç½‘ç»œè¿æ¥
netstat -an | grep -E "30303|9000|8545|5052" | wc -l
```

## å®‰å…¨å»ºè®®

1. **é˜²ç«å¢™é…ç½®**: åªå¼€æ”¾å¿…è¦çš„ç«¯å£
   - RPC ç«¯å£ï¼ˆ8545, 5052ï¼‰åº”è¯¥é™åˆ¶è®¿é—®
   - P2P ç«¯å£ï¼ˆ30303, 9000ï¼‰éœ€è¦å¯¹å¤–å¼€æ”¾

2. **ç”¨æˆ·æƒé™**: ä½¿ç”¨é root ç”¨æˆ·è¿è¡ŒèŠ‚ç‚¹

3. **å¯†é’¥å®‰å…¨**: ä¿æŠ¤ JWT secret æ–‡ä»¶
   ```bash
   chmod 600 /var/lib/reth/jwt-secret
   ```

4. **RPC è®¿é—®æ§åˆ¶**: å¦‚æœä¸éœ€è¦å¯¹å¤–æš´éœ² RPCï¼Œå°† `--http.addr` è®¾ç½®ä¸º `127.0.0.1`

5. **å®šæœŸæ›´æ–°**: ä¿æŒå®¢æˆ·ç«¯ç‰ˆæœ¬æ›´æ–°ï¼ŒåŠæ—¶ä¿®å¤å®‰å…¨æ¼æ´

## å‚è€ƒèµ„æº

- **Reth å®˜æ–¹æ–‡æ¡£**: https://reth.rs/
- **Reth GitHub**: https://github.com/paradigmxyz/reth
- **Lighthouse å®˜æ–¹æ–‡æ¡£**: https://lighthouse-book.sigmaprime.io/
- **Lighthouse GitHub**: https://github.com/sigp/lighthouse
- **ä»¥å¤ªåŠå®˜æ–¹æ–‡æ¡£**: https://ethereum.org/en/developers/docs/nodes-and-clients/

## è®¸å¯è¯

æœ¬æ–‡æ¡£éµå¾ª MIT è®¸å¯è¯ã€‚

